(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e){e.exports={a:"river"}},136:function(e,t,n){e.exports=n(223)},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"definations",function(){return De}),n.d(a,"dictionaries",function(){return Ae});var r={};n.r(r),n.d(r,"defination",function(){return We}),n.d(r,"word",function(){return Pe});var i=n(0),c=n.n(i),o=n(8),u=n(25),l=n(22),s=n(118),d=n(28),f=n(18),p=n(19),m="INCRESDE_WORD_SEARCH_COUNT",v="REQUEST_FETCHING_WORD",b="SUCCESS_FETCHING_WORD",h="REJECT_FETCHING_WORD",y=Object(u.b)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload.id;default:return e}},name:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},explanations:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},searchCounter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case m:return e+1;default:return e}},isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case v:return!0;case b:case h:return!1;default:return e}}}),E="ADD_DICTIONARY",g="DEL_DICTIONARY",O="MAP_DEFINATION_TO_DICTIONARY",j="UNMAP_DEFINATION_TO_DICTIONARY",w="ADD_ENTITIES",I="RESTORE_FROM_INDEXEDDB",k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type.includes("WORD"))return Object(f.a)({},e,Object(d.a)({},t.payload.id,y(e[t.payload.id],t)));switch(t.type){case w:case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.words,function(n){return y(Object(f.a)({},e[n.id],n),t)}));default:return e}},x=n(134),S=n(76),C=Object(u.b)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload.id;default:return e}},name:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.payload.name;default:return e}},definations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return[].concat(Object(S.a)(e),[t.payload.definationId]);case j:return e.filter(function(e){return e!==t.payload.definationId});default:return e}}});function _(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var N=C(void 0,{type:"@@INIT"}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d.a)({},N.id,N),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=C(void 0,t);return Object(f.a)({},e,Object(d.a)({},n.id,n));case g:var a=t.payload.dictionaryId;return e[a],Object(x.a)(e,[a].map(_));case O:case j:return Object(f.a)({},e,Object(d.a)({},t.payload.dictionaryId,C(e[t.payload.dictionaryId],t)));case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.dictionaries,function(n){return C(Object(f.a)({},e[n.id],n),t)}));default:return e}},T=Object(u.b)({id:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},word:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},level:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},domain:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},text:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},translate:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},examples:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},dictionaries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return[].concat(Object(S.a)(e),[t.payload.dictionaryId]);case j:return e.filter(function(e){return e!==t.payload.dictionaryId});default:return e}}}),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(f.a)({},e,Object(p.mapValues)(t.payload.definations,function(n){return T(Object(f.a)({},e[n.id],n,{word:t.result}),t)}));case I:return Object(f.a)({},e,Object(p.mapValues)(t.payload.definations,function(n){return T(Object(f.a)({},e[n.id],n),t)}));case O:case j:return Object(f.a)({},e,Object(d.a)({},t.payload.definationId,T(e[t.payload.definationId],t)));default:return e}},A=Object(u.b)({words:k,dictionaries:R,definations:D}),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var U=n(15),M=n.n(U),L=n(24),F=n(29),K=n(31),H=n(234),B=n(224),V=n(233),Y=n(9),G=n(236),J=n(132);function q(e){var t=e.children;return c.a.createElement("div",null,t)}var Q=n(228),X=n(96),$=n(128),z=n(232),Z=n(227),ee=n(231),te=n(235),ne=n(229),ae=n(58),re="https://river.qas612820704.now.sh";function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(L.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/cambridge/english-chinese-traditional/auto-complete/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(L.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/cambridge/english-chinese-traditional/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e,t){return function(n,a){return a().definations[e].dictionaries.includes(t)?n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return function(n,a,r){var i=r.db;n({type:j,payload:{dictionaryId:t,definationId:e}});var c=a().dictionaries[t];i.dictionaries.set(t,c),i.definations.delete(e)}}(e,t)):n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return function(n,a,r){var i=r.db;n({type:O,payload:{dictionaryId:t,definationId:e}});var c=a().dictionaries[t],o=a().definations[e];i.dictionaries.set(t,c),i.definations.set(e,o)}}(e,t))}}function se(e,t){return{type:w,payload:e,result:t}}function de(e){var t,n=Object(l.c)(Object(i.useCallback)(function(t){return t.words[e]},[e])),a=Object(l.b)();return Object(i.useEffect)(function(){},[e]),n||a((t=e,function(){var e=Object(L.a)(M.a.mark(function e(n,a,r){var i,c,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.schema,a().words[t]){e.next=17;break}return n({type:v,payload:{id:t}}),e.prev=4,e.next=7,oe(t);case 7:c=e.sent,o=Object(ae.a)(c,i.word),n(se(o.entities,o.result)),n({type:b,payload:{id:t}}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error(e.t0),n({type:h,payload:{id:t}});case 17:return e.abrupt("return",a().words[t]);case 18:case"end":return e.stop()}},e,null,[[4,13]])}));return function(t,n,a){return e.apply(this,arguments)}}())),{word:n}}var fe=Q.a.Title,pe=Q.a.Paragraph,me=X.a.TabPane;function ve(e){var t=e.wordId,n=de(t).word;return n?c.a.createElement("section",{style:{margin:"16px 0"}},c.a.createElement($.a,{spinning:n.isFetching},c.a.createElement(fe,null,t),c.a.createElement(X.a,null,n.explanations.map(function(e){return c.a.createElement(me,{tab:c.a.createElement("span",null,c.a.createElement(B.a,{style:{background:"#008dff",marginRight:8}},e.pos),e.pos),key:e.pos},function(e){return c.a.createElement("div",null,c.a.createElement(pe,{style:{marginBottom:16}},c.a.createElement(Y.a,{type:"notification",style:{marginRight:16}}),c.a.createElement(Ee,Object.assign({region:"US"},e.ipaUS)),c.a.createElement(Ee,Object.assign({region:"UK"},e.ipaUK))),c.a.createElement(Z.a,{itemLayout:"vertical",dataSource:e.senses,renderItem:be}))}(e))})))):c.a.createElement($.a,null,c.a.createElement(z.a,null))}function be(e){return c.a.createElement(Z.a.Item,null,e.guideWord&&c.a.createElement(fe,{level:4},c.a.createElement(Y.a,{type:"radar-chart",style:{marginRight:8}}),e.guideWord),c.a.createElement(Z.a,{bordered:!0,itemLayout:"vertical",dataSource:e.definations,renderItem:function(e){return c.a.createElement(he,{definationId:e})}}))}function he(e){var t=e.definationId,n=function(e){return{defination:Object(l.c)(Object(i.useCallback)(function(t){return t.definations[e]},[e]))}}(t).defination,a=Object(i.useState)(!1),r=Object(F.a)(a,2),o=r[0],u=r[1],s=Object(l.c)(function(e){return Object(p.map)(e.dictionaries)},[]),d=Object(l.b)(),f=Object(i.useCallback)(function(e,t){return d(le(e,t))},[]),m=c.a.createElement(V.a,{onMouseLeave:function(){return u(!1)}},s.map(function(e){return c.a.createElement(V.a.Item,{key:e.id},c.a.createElement(ee.a,{checked:e.definations.includes(t),onChange:function(){return f(t,e.id)}},e.name))}));return c.a.createElement(Z.a.Item,{style:{flexDirection:"column"}},c.a.createElement(Z.a.Item.Meta,{title:c.a.createElement("span",null,c.a.createElement(te.a,{style:{marginRight:8,background:"#52c41a"},count:n.level}),n.text),description:c.a.createElement("span",null,c.a.createElement(ne.a,{overlay:m,visible:o,onMouseEnter:function(){return u(!0)}},c.a.createElement(Y.a,{type:"plus",style:{marginRight:8,cursor:"pointer"}})),c.a.createElement("span",{style:{color:"#1890ff"}},n.translate))}),c.a.createElement(Z.a,{itemLayout:"vertical",dataSource:n.examples,renderItem:ye}))}function ye(e){return c.a.createElement(Z.a.Item,null,c.a.createElement(pe,null,e.text),c.a.createElement(pe,{style:{color:"#40a9ff"}},e.translate))}function Ee(e){var t=e.region,n=e.html,a=e.audioUrl,r=Object(i.useState)(!1),o=Object(F.a)(r,2),u=o[0],l=o[1],s=Object(i.useMemo)(function(){return new Audio(a)},[a]);Object(i.useEffect)(function(){s.addEventListener("ended",function(){l(!1)})},[s]);var d=Object(i.useCallback)(function(){l(!0),s.play()},[s]);return c.a.createElement("span",{style:{marginRight:16,cursor:"pointer"},onClick:d},c.a.createElement(B.a,{style:{marginRight:8,background:u?"#fa8c16":""}},t),"/",c.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),"/")}var ge=n(230);function Oe(e){var t=e.dictionaryId,n=Object(l.c)(Object(i.useCallback)(function(e){var n=e.dictionaries[t];if(n)return Object(f.a)({},n,{definations:n.definations.map(function(t){return e.definations[t]})})},[t]));return n?c.a.createElement(Z.a,{grid:{gutter:16,column:4},dataSource:n.definations,renderItem:je}):c.a.createElement($.a,null)}function je(e){return c.a.createElement(Z.a.Item,null,c.a.createElement(ge.a,null,c.a.createElement(ge.a.Meta,{title:c.a.createElement("span",null,c.a.createElement(te.a,{style:{marginRight:8,background:"#52c41a"},count:e.level}),c.a.createElement(K.a,{to:"/words/".concat(e.word)},e.word)),description:e.translate})))}function we(){return c.a.createElement("div",null,c.a.createElement(K.b,null,c.a.createElement(Ie,{path:"/"}),c.a.createElement(Oe,{path:":dictionaryId"})))}function Ie(){var e=Object(i.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(l.b)(),o=Object(i.useCallback)(function(){var e;a(""),r((e={name:n},function(t,n,a){var r=a.db,i=e.name;t({type:E,payload:Object(f.a)({id:i},e)});var c=n().dictionaries[i];r.dictionaries.set(i,c)}))},[n]),u=Object(l.c)(function(e){return Object(p.map)(e.dictionaries)},[]);return c.a.createElement("div",null,c.a.createElement(J.a,{value:n,onChange:function(e){return a(e.target.value)},onPressEnter:o,placeholder:"Add dictionary",suffix:c.a.createElement(Y.a,{onClick:o,type:"plus"}),style:{marginBottom:"2em"}}),c.a.createElement(Z.a,{grid:{gutter:16,column:4},dataSource:u,renderItem:function(e){return c.a.createElement(ke,{dictionary:e})}}))}function ke(e){var t=e.dictionary,n=Object(l.b)(),a=Object(i.useCallback)(function(){return n((e=t.id,function(t,n,a){var r=a.db;t({type:g,payload:{dictionaryId:e}}),r.dictionaries.delete(e)}));var e},[t.id]);return c.a.createElement(Z.a.Item,{style:{cursor:"pointer"},onClick:function(){return Object(K.c)("/dictionaries/".concat(t.id))}},c.a.createElement(ge.a,null,c.a.createElement(ge.a.Meta,{title:c.a.createElement("span",null,"default"!==t.id&&c.a.createElement(Y.a,{type:"minus",style:{marginRight:8,color:"#f5222d"},onClick:a}),t.name)})))}n(221);var xe=H.a.Header,Se=H.a.Content,Ce=H.a.Sider;function _e(e){var t=e.children,n=function(){var e=Object(l.c)(Object(i.useCallback)(function(e){return e.dictionaries},[]));return{dictionaries:Object(p.map)(e)}}().dictionaries,a=function(){var e=Object(i.useState)([]),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(i.useCallback)(function(){var e=Object(L.a)(M.a.mark(function e(t){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ie(t);case 4:n=e.sent,r=n.results,a(r.map(function(e){return e.searchtext}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]);return[n,r]}(),r=Object(F.a)(a,2),o=r[0],u=r[1],s=Object(i.useCallback)(function(e){return Object(K.c)("/words/".concat(e))},[]);return c.a.createElement(H.a,null,c.a.createElement(Ce,{className:"sider",collapsible:!0,collapsedWidth:"0"},c.a.createElement("div",{className:"sider__brand"},c.a.createElement(B.a,{className:"sider__brand__avatar"},"R")),c.a.createElement(V.a,{theme:"dark",mode:"inline",defaultOpenKeys:["dictionaries"]},c.a.createElement(V.a.SubMenu,{key:"dictionaries",title:c.a.createElement("span",null,c.a.createElement(Y.a,{type:"book"}),c.a.createElement("span",null,"Dictionaries"))},n.map(function(e){return c.a.createElement(V.a.Item,{key:e.id},c.a.createElement(K.a,{to:"/dictionaries/".concat(e.id)},e.name))}),c.a.createElement(V.a.Item,{key:"new-dictionary"},c.a.createElement(K.a,{to:"/dictionaries"},c.a.createElement(Y.a,{type:"plus"}),c.a.createElement("span",null,"New Dictionary")))))),c.a.createElement(H.a,{className:"main"},c.a.createElement(xe,{className:"header"},c.a.createElement(G.a,{className:"header__search-bar",dataSource:o,onSelect:s,onSearch:u},c.a.createElement(J.a.Search,{placeholder:"translate...",onSearch:s}))),c.a.createElement(Se,{className:"content__container"},c.a.createElement("div",{className:"content"},t))))}var Ne=n(133),Re=n(131);var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(Ne.a)(Re.a,1,{upgrade:function(t){var n=!0,a=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;t.createObjectStore(o)}}catch(u){a=!0,r=u}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}}}),n=e.map(function(e){return{get:function(){var n=Object(L.a)(M.a.mark(function n(a){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=a,n.abrupt("return",n.sent.get(n.t0,n.t1));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),getAll:function(){var n=Object(L.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.getAll(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),set:function(){var n=Object(L.a)(M.a.mark(function n(a,r){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=r,n.t2=a,n.abrupt("return",n.sent.put(n.t0,n.t1,n.t2));case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),delete:function(){var n=Object(L.a)(M.a.mark(function n(a){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.t1=a,n.abrupt("return",n.sent.delete(n.t0,n.t1));case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),clear:function(){var n=Object(L.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.clear(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),keys:function(){var n=Object(L.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:return n.t0=e,n.abrupt("return",n.sent.getAllKeys(n.t0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()}});return Object(p.mapKeys)(n,function(t,n){return e[n]})}(["definations","dictionaries"]),De=Te.definations,Ae=Te.dictionaries,We=new ae.b.Entity("definations"),Pe=new ae.b.Entity("words",{explanations:[{senses:[{definations:[We]}]}]});We.define({word:Pe});n(222);var Ue=u.c,Me=Object(u.d)(A,Ue(Object(u.a)(s.a.withExtraArgument({db:a,schema:r}))));Me.dispatch(function(){var e=Object(L.a)(M.a.mark(function e(t,n,a){var r,i,c,o,u,l,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.db,i=r.dictionaries.keys().then(function(e){return e.map(function(e){return r.dictionaries.get(e)})}).then(function(e){return Promise.all(e)}),c=r.definations.keys().then(function(e){return e.map(function(e){return r.definations.get(e)})}).then(function(e){return Promise.all(e)}),e.next=5,Promise.all([i,c]);case 5:return o=e.sent,u=Object(F.a)(o,2),l=u[0],s=u[1],e.abrupt("return",t({type:I,payload:{dictionaries:Object(p.mapKeys)(l,function(e){return e.id}),definations:Object(p.mapKeys)(s,function(e){return e.id})}}));case 10:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),Object(o.render)(c.a.createElement(l.a.Provider,{value:Me},c.a.createElement(function(){return c.a.createElement(K.b,null,c.a.createElement(_e,{path:"/"},c.a.createElement(q,{path:"words"},c.a.createElement(ve,{path:":wordId"})),c.a.createElement(we,{path:"dictionaries/*"})))},null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");W?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):P(t,e)})}}()}},[[136,1,2]]]);
//# sourceMappingURL=main.4b74c724.chunk.js.map